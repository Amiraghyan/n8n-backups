{
  "active": false,
  "connections": {
    "add label: tools": {
      "main": [
        [
          {
            "node": "Remove INBOX-rest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add label: receipts": {
      "main": [
        [
          {
            "node": "Remove INBOX-rest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add label: CL_link": {
      "main": [
        [
          {
            "node": "Remove INBOX-rest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Text Classifier",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "add label: other": {
      "main": [
        [
          {
            "node": "Remove INBOX-rest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait 1 secs": {
      "main": [
        [
          {
            "node": "Email info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email info": {
      "main": [
        [
          {
            "node": "Extract URLs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract URLs": {
      "main": [
        [
          {
            "node": "Not in DB",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "read api_param": {
      "main": [
        [
          {
            "node": "api_param",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "api_param": {
      "main": [
        [
          {
            "node": "Existing DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "read Listings": {
      "main": [
        [
          {
            "node": "Email IDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Email IDs": {
      "main": [
        [
          {
            "node": "email processed?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add \"Listing_urls\"": {
      "main": [
        [
          {
            "node": "Remove \"Inbox\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Existing_aux": {
      "main": [
        [
          {
            "node": "Not in DB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Existing DB": {
      "main": [
        [
          {
            "node": "Existing_aux",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "API Req1": {
      "main": [
        [
          {
            "node": "Response1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "API Req2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "API Req3": {
      "main": [
        [
          {
            "node": "Response3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "API Req4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "API Req4": {
      "main": [
        [
          {
            "node": "Response4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Errores",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "API Req": {
      "main": [
        [
          {
            "node": "Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "API Req1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sergios Gmail": {
      "main": [
        [
          {
            "node": "Text Classifier",
            "type": "main",
            "index": 0
          },
          {
            "node": "read Listings",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Sergios Gmail",
            "type": "main",
            "index": 0
          },
          {
            "node": "read api_param",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response": {
      "main": [
        [
          {
            "node": "Status Check ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "API Req2": {
      "main": [
        [
          {
            "node": "Response2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "API Req3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Inbox": {
      "main": [
        [
          {
            "node": "add Listing_urls",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mark as Read": {
      "main": [
        [
          {
            "node": "Remove Inbox",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "\"Removed\"": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Not in DB": {
      "main": [
        [
          {
            "node": "API Req",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "\"OK\"": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "clean up noise": {
      "main": [
        [
          {
            "node": "mark \"delete\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "by City": {
      "main": [
        [
          {
            "node": "mark \"send\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "email processed?": {
      "main": [
        [
          {
            "node": "add \"Listing_urls\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text Classifier": {
      "main": [
        [
          {
            "node": "Wait 1 secs",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add label: CTA_responses",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add label: CL_link",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add label: receipts",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add label: tools",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add label: other",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add label: CTA_responses": {
      "main": [
        [
          {
            "node": "Remove INBOX-rest",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Status Check ": {
      "main": [
        [
          {
            "node": "\"OK\"",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "\"Removed\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Status Check 1": {
      "main": [
        [
          {
            "node": "\"OK\"",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "\"Removed\"",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Status Check 2": {
      "main": [
        [
          {
            "node": "\"OK\"",
            "type": "main",
            "index": 2
          }
        ],
        [
          {
            "node": "\"Removed\"",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Status Check 3": {
      "main": [
        [
          {
            "node": "\"OK\"",
            "type": "main",
            "index": 3
          }
        ],
        [
          {
            "node": "\"Removed\"",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "Status Check 4": {
      "main": [
        [
          {
            "node": "\"OK\"",
            "type": "main",
            "index": 4
          }
        ],
        [
          {
            "node": "\"Removed\"",
            "type": "main",
            "index": 4
          }
        ]
      ]
    },
    "Response1": {
      "main": [
        [
          {
            "node": "Status Check 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response4": {
      "main": [
        [
          {
            "node": "Status Check 4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response3": {
      "main": [
        [
          {
            "node": "Status Check 3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response2": {
      "main": [
        [
          {
            "node": "Status Check 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove \"Inbox\"": {
      "main": [
        [
          {
            "node": "add \"Read\"",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remove Duplicates": {
      "main": [
        [
          {
            "node": "Mark as Read",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "Remove Duplicates",
            "type": "main",
            "index": 0
          },
          {
            "node": "by City",
            "type": "main",
            "index": 0
          },
          {
            "node": "clean up noise",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-09-04T04:25:05.553Z",
  "id": "u7x9crQtu9IjRScZ",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "SYC 03: CL Listings Emails â†’ Listing URLs",
  "nodes": [
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "Label_2838653122171546890"
        ]
      },
      "id": "8250939e-9b57-4851-8e63-84bd61f0390b",
      "name": "add label: tools",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3260,
        1220
      ],
      "retryOnFail": false,
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "Label_8979304687782068158"
        ]
      },
      "id": "39a53935-31ad-4bf8-8ec6-8e575f79fb09",
      "name": "add label: receipts",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3260,
        1060
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "Label_6791890012993831639"
        ]
      },
      "id": "3413ea06-1ed6-4028-95a9-aaeae7dcf406",
      "name": "add label: CL_link",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3260,
        900
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "operation": "removeLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "INBOX"
        ]
      },
      "id": "03947d15-3b16-4ba5-bb4b-640f60f0b83a",
      "name": "Remove INBOX-rest",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3660,
        1060
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "model": "gpt-4o-mini-2024-07-18",
        "options": {
          "responseFormat": "text"
        }
      },
      "id": "304da6c8-afb4-4deb-8378-f95ea3e58653",
      "name": "OpenAI Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        2820,
        980
      ],
      "credentials": {
        "openAiApi": {
          "id": "5kwsndHiYkIfcdvj",
          "name": "Fausto's OpenAi"
        }
      }
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "Label_54595144828602402"
        ]
      },
      "id": "bca10861-be47-4d99-8330-cf06737b61a8",
      "name": "add label: other",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3260,
        1380
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "amount": 1
      },
      "id": "1c795db1-92c3-4f9a-947e-eaa640710901",
      "name": "Wait 1 secs",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3260,
        580
      ],
      "webhookId": "abf3d4eb-831d-440c-b13b-6bf94f2dbc3a"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c1ea671f-95b2-4722-9cba-c5af99bc1f78",
              "name": "id_email",
              "value": "={{ $('Text Classifier').item.json.id }}",
              "type": "string"
            },
            {
              "id": "15c3a38b-81f6-4405-98d3-541a8ab16453",
              "name": "subject",
              "value": "={{ $('Text Classifier').item.json.headers.subject }}",
              "type": "string"
            },
            {
              "id": "f4201308-4eab-4e83-8466-e809a55dd756",
              "name": "body",
              "value": "={{ $('Text Classifier').item.json.text }}",
              "type": "string"
            },
            {
              "id": "3f3c796c-2719-4f84-a2dc-75d863dfcb08",
              "name": "headers[\"x-received\"]",
              "value": "={{ $json.headers.received }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "5bfd03b9-ec07-4741-bf11-5da1dd1373be",
      "name": "Email info",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3460,
        580
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();  // Fetch the input from the previous node\n\n// Regex to extract URLs\nconst urlPattern = /https?:\\/\\/[^\\s\"<>]+/g;\n\n// Function to extract listing ID from URL\nconst extractListingId = (url) => {\n  const match = url.match(/\\/(\\d+)\\.html$/);\n  return match ? match[1] : null;\n}\n\n// Function to extract the city from the subject field\nconst extractCityFromSubject = (subject) => {\n  const cityPattern = /cars\\+trucks \\(([^)]+)\\)/;\n  const match = subject.match(cityPattern);\n  return match ? match[1] : null;\n}\n\n// Function to extract and format the date and time from the x-received field\nconst extractDateTimeFromXReceived = (xReceived) => {\n  const dateTimePattern = /(\\w{3}, \\d{2} \\w{3} \\d{4}) (\\d{2}:\\d{2}:\\d{2})/;\n  const match = xReceived.match(dateTimePattern);\n  \n  if (match) {\n    const originalDate = new Date(`${match[1]} ${match[2]} GMT-0700`); // Convert to PDT\n    \n    // Format the date as yyyy.mm.dd\n    const formattedDate = originalDate.getFullYear() + '.' + \n                          String(originalDate.getMonth() + 1).padStart(2, '0') + '.' + \n                          String(originalDate.getDate()).padStart(2, '0');\n    \n    // Extract and format the time and append \"PDT\"\n    const formattedTime = `${match[2]} PDT`;\n    \n    return `${formattedDate} || ${formattedTime}`;\n  }\n  return null;\n}\n\n// Function to filter and process the data\nconst processData = (items) => {\n  let output = [];\n\n  items.forEach(item => {\n    const { id_email, subject, body, headers } = item.json;\n\n    // Extract the city from the subject field\n    const city = extractCityFromSubject(subject);\n\n    // Extract URLs from the body\n    const urls = body.match(urlPattern) || [];\n\n    // Filter unwanted URLs and remove duplicates\n    const validUrls = Array.from(new Set(\n      urls.filter(url => \n        !url.includes(\"/search/\") &&\n        !url.includes(\"/savesearch\") &&\n        !url.includes(\"/store/apps\") &&\n        !url.includes(\"/us/app\")\n      )\n    ));\n\n    // Extract the date and time from x-received\n    const xReceived = headers[\"x-received\"];\n    const alert_email_received = extractDateTimeFromXReceived(xReceived);\n\n    // For each valid URL, create a new object with the additional data and listing ID\n    validUrls.forEach(url => {\n      const listing_id = extractListingId(url);  // Extract the listing ID\n      output.push({\n        id_email,\n        city,  // The city extracted from the subject\n        subject,\n        alert_email_received,  // Replaces x-received\n        listing_url: url,  // Renamed from extracted_url to listing_url\n        listing_id  // Add listing ID to the output\n      });\n    });\n  });\n\n  return output;\n}\n\n// Process the input data and return the result\nconst result = processData(items);\n\n// Return the result for the next node\nreturn result;\n"
      },
      "id": "d7e738e1-507b-46ff-9c97-ebf7c0c5b74f",
      "name": "Extract URLs",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3660,
        580
      ],
      "executeOnce": false,
      "retryOnFail": false,
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3008b87c-ebf9-4362-a537-5fbf4fe1198a",
              "name": "delay",
              "value": "={{ $json['delay (ms)'] }}",
              "type": "number"
            },
            {
              "id": "92038037-3e41-49ab-b00a-d3af61894948",
              "name": "get_images",
              "value": "={{ $json.get_images }}",
              "type": "boolean"
            },
            {
              "id": "7e308d21-1cce-4631-bf50-ef7dfde981af",
              "name": "api_port",
              "value": "={{ $json.api_port }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "d07b0a56-696f-41c4-b4df-56afe0d3cb4c",
      "name": "api_param",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2820,
        80
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1155242503,
          "mode": "list",
          "cachedResultName": "Dashboard",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=1155242503"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "B1:D2"
            }
          },
          "outputFormatting": {
            "values": {
              "general": "UNFORMATTED_VALUE",
              "date": "FORMATTED_STRING"
            }
          },
          "returnFirstMatch": true
        }
      },
      "id": "764a3990-5fed-4990-89d7-7091bedcd90f",
      "name": "read api_param",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2600,
        80
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 330378290,
          "mode": "list",
          "cachedResultName": "Listings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=330378290"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_email",
              "lookupValue": "="
            }
          ]
        },
        "options": {
          "returnFirstMatch": true
        }
      },
      "id": "62e07009-428f-45d6-a66d-11934ce33227",
      "name": "read Listings",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        2600,
        280
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "notesInFlow": false,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ba871235-f52f-4ac7-9c65-4872f86cb9a8",
              "name": "id",
              "value": "={{ $('Sergios Gmail').first().json.id }}",
              "type": "string"
            },
            {
              "id": "90466d49-c1b3-4d7d-a9a5-a9d12a1cc91c",
              "name": "threadId",
              "value": "={{ $('Sergios Gmail').first().json.threadId }}",
              "type": "string"
            },
            {
              "id": "15745512-4234-432d-93e9-9e50770d53b4",
              "name": "labelIds",
              "value": "={{ $('Sergios Gmail').first().json.labelIds }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "77e3b9ea-f730-4c34-ae40-460968c27d7f",
      "name": "Email IDs",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2820,
        280
      ]
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $('Sergios Gmail').item.json.id }}",
        "labelIds": [
          "Label_6042366710233736031"
        ]
      },
      "id": "2c9334aa-847f-4e3e-9daf-78ed1b2d98c3",
      "name": "add \"Listing_urls\"",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        2600,
        460
      ],
      "retryOnFail": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "markAsRead",
        "messageId": "={{ $('Sergios Gmail').item.json.id }}"
      },
      "id": "278ba3bb-d0ae-4c17-84d4-c07d7e4ca953",
      "name": "add \"Read\"",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3040,
        460
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b77348e9-67c9-497e-af21-078037d982eb",
              "name": "status",
              "value": "={{ $json.status }}",
              "type": "string"
            },
            {
              "id": "b023bc65-799d-475c-9119-9b6438254be1",
              "name": "city",
              "value": "={{ $json.city }}",
              "type": "string"
            },
            {
              "id": "6f0d6d6f-6b54-4f58-9629-6feacd440780",
              "name": "listing_id",
              "value": "={{ $json.listing_id }}",
              "type": "number"
            },
            {
              "id": "9a85c52b-a94d-4cb6-b09b-ee5989d09087",
              "name": "listing_url",
              "value": "={{ $json.listing_url }}",
              "type": "string"
            },
            {
              "id": "54af7354-77f4-4175-89a8-90ba10b94590",
              "name": "listing_url_extracted_on",
              "value": "={{ $json.listing_url_extracted_on }}",
              "type": "string"
            },
            {
              "id": "b3ea8090-6040-4743-8c0c-0bb6e214d801",
              "name": "SEND",
              "value": "={{ $json.SEND }}",
              "type": "string"
            },
            {
              "id": "d73ed69a-3869-4028-8917-9e931521ae50",
              "name": "seller_email",
              "value": "={{ $json.seller_email }}",
              "type": "string"
            },
            {
              "id": "36008464-d950-4751-8528-126d96d93638",
              "name": "seller_phone",
              "value": "={{ $json.seller_phone }}",
              "type": "string"
            },
            {
              "id": "2d65bfcf-1f18-4afc-9898-84c3d2da601b",
              "name": "seller_name",
              "value": "={{ $json.seller_name }}",
              "type": "string"
            },
            {
              "id": "ca319fd3-3fc3-42f6-b756-ea4348db3594",
              "name": "year",
              "value": "={{ $json.year }}",
              "type": "number"
            },
            {
              "id": "c895bd28-de49-4be7-91b3-e571d58ad3e8",
              "name": "make-model",
              "value": "={{ $json['make-model'] }}",
              "type": "string"
            },
            {
              "id": "ea1236e3-7f2b-4419-bfd5-b0c7e1c4f5fb",
              "name": "listing_description",
              "value": "={{ $json.listing_description }}",
              "type": "string"
            },
            {
              "id": "9537365d-6dd3-4f3e-a71d-d1d2d522d166",
              "name": "auto_vin",
              "value": "={{ $json.auto_vin }}",
              "type": "string"
            },
            {
              "id": "3dc57eb9-0d4a-4cde-9912-89b64413f5ca",
              "name": "price",
              "value": "={{ $json.price }}",
              "type": "number"
            },
            {
              "id": "ebe11514-92b4-42db-b577-2d0dab3cbfba",
              "name": "title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "9d8829cd-598e-4cf1-b559-f0a75f63a279",
              "name": "mileage",
              "value": "={{ $json.mileage }}",
              "type": "number"
            },
            {
              "id": "e41d2526-9640-4d24-9825-475f7ff8fc9f",
              "name": "fuel_type",
              "value": "={{ $json.fuel_type }}",
              "type": "string"
            },
            {
              "id": "f26e858f-f129-48b3-b02b-a2f2ded89500",
              "name": "cylinders",
              "value": "={{ $json.cylinders }}",
              "type": "string"
            },
            {
              "id": "00d78891-3d10-4b67-93fc-ff284adaf835",
              "name": "drivetrain",
              "value": "={{ $json.drivetrain }}",
              "type": "string"
            },
            {
              "id": "807f323b-7dae-4d7f-bc99-576c32b5c5ef",
              "name": "paint",
              "value": "={{ $json.paint }}",
              "type": "string"
            },
            {
              "id": "64e0807d-8933-4f4a-8329-9d0425b8e9ed",
              "name": "transmission",
              "value": "={{ $json.transmission }}",
              "type": "string"
            },
            {
              "id": "f7b76c3e-54e2-4dc6-937c-f96957fb2b47",
              "name": "bodytype",
              "value": "={{ $json.bodytype }}",
              "type": "string"
            },
            {
              "id": "ed0f316b-b438-4d4d-b6e4-cf9b76054009",
              "name": "auto_images",
              "value": "={{ $json.auto_images }}",
              "type": "string"
            },
            {
              "id": "2dabb1d8-9c2a-4099-ba44-ccef01d18ae1",
              "name": "id_email",
              "value": "={{ $json.id_email }}",
              "type": "string"
            },
            {
              "id": "35caf42a-b661-4a3c-bb09-c797b0f65c44",
              "name": "search_alert_received",
              "value": "={{ $json.search_alert_received }}",
              "type": "string"
            },
            {
              "id": "d5de5fb9-453d-44c2-a762-67413dcae67e",
              "name": "search_alert_email_subject",
              "value": "={{ $json.search_alert_email_subject }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {
          "ignoreConversionErrors": true
        }
      },
      "id": "ac081c8c-d26b-4f06-9691-64420c030a16",
      "name": "Existing_aux",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3260,
        80
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 330378290,
          "mode": "list",
          "cachedResultName": "Listings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=330378290"
        },
        "options": {}
      },
      "id": "6805f92c-a1e0-4c86-aae2-c1f21b3ba5fc",
      "name": "Existing DB",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        3040,
        80
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "122f4a0e-3ab3-4046-81ea-d3ab33327f06",
              "leftValue": "={{ $('Sergios Gmail').item.json.id }}",
              "rightValue": "={{ $('read Listings').item.json.id_email }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "id": "8e8f58ca-15cd-4cf7-be36-d92bb72d9548",
      "name": "email processed?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3040,
        280
      ],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "numberInputs": 5
      },
      "id": "db171084-4970-43fa-a661-caab2c859a84",
      "name": "\"Removed\"",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        4900,
        760
      ]
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ \"http://45.63.50.167:\" + $('api_param').first().json.api_port + \"/cl_listing\" }}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={ \"url\": \"{{ $json.listing_url }}\",\n  \"delay\": {{ \"10000\" }},\n  \"images\": {{ \"false\"}}\n}",
        "options": {}
      },
      "id": "5dfe17ff-de6a-4d73-9369-cf86fac94183",
      "name": "API Req1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4060,
        320
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "retryOnFail": false,
      "waitBetweenTries": 3000,
      "maxTries": 2,
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ \"http://45.63.50.167:\" + $('api_param').first().json.api_port + \"/cl_listing\" }}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={ \"url\": \"{{ $json.listing_url }}\",\n  \"delay\": {{ \"10000\" }},\n  \"images\": {{ \"false\"}}\n}",
        "options": {}
      },
      "id": "0aa1e522-452f-48f0-902b-a2b9d7b0bf2d",
      "name": "API Req3",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4040,
        760
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "retryOnFail": false,
      "waitBetweenTries": 3000,
      "maxTries": 2,
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ \"http://45.63.50.167:\" + $('api_param').first().json.api_port + \"/cl_listing\" }}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={ \"url\": \"{{ $json.listing_url }}\",\n  \"delay\": {{ \"10000\" }},\n  \"images\": {{ \"false\"}}\n}",
        "options": {}
      },
      "id": "c6931f5a-329d-4e81-9b17-4ca1cb28d6c5",
      "name": "API Req4",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4040,
        980
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "retryOnFail": false,
      "waitBetweenTries": 3000,
      "maxTries": 2,
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ \"http://45.63.50.167:\" + $('api_param').first().json.api_port + \"/cl_listing\" }}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={ \"url\": \"{{ $json.listing_url }}\",\n  \"delay\": {{ \"10000\" }},\n  \"images\": {{ \"false\"}}\n}",
        "options": {}
      },
      "id": "1f533d8c-f10e-4944-93a3-4db7e07e660f",
      "name": "API Req",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4060,
        100
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "retryOnFail": false,
      "waitBetweenTries": 3000,
      "maxTries": 2,
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "getAll",
        "limit": 20,
        "simple": false,
        "filters": {
          "labelIds": [
            "INBOX"
          ],
          "readStatus": "both"
        },
        "options": {}
      },
      "id": "5f940e69-dabb-47b7-bfa9-9ddf39cc303f",
      "name": "Sergios Gmail",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        2360,
        740
      ],
      "alwaysOutputData": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours"
            }
          ]
        }
      },
      "id": "bca2326e-cc3c-4b62-ae38-0a626e913d0a",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        2240,
        80
      ]
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"id_email\": \"{{ $('Not in DB').item.json.id_email }}\",\n  \"city\": \"{{ $('Not in DB').item.json.city }}\",\n  \"subject\": \"{{ $('Not in DB').item.json.subject }}\",\n  \"alert_email_received\": \"{{ $('Not in DB').item.json.alert_email_received }}\",\n  \"listing_url\": \"{{ $('Not in DB').item.json.listing_url }}\",\n  \"listing_id\": \"{{ $('Not in DB').item.json.listing_id }}\"\n}",
        "includeOtherFields": true,
        "options": {
          "stripBinary": true
        }
      },
      "id": "798e1080-56af-4076-bd63-6bc6a9db611e",
      "name": "Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4300,
        80
      ]
    },
    {
      "parameters": {},
      "id": "847585bc-2d1b-4b2c-8b00-7b9c93a5a463",
      "name": "Errores",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        4520,
        1180
      ]
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ \"http://45.63.50.167:\" + $('api_param').first().json.api_port + \"/cl_listing\" }}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={ \"url\": \"{{ $json.listing_url }}\",\n  \"delay\": {{ \"10000\" }},\n  \"images\": {{ \"false\"}}\n}",
        "options": {}
      },
      "id": "3cbc90a1-f18e-4c69-a029-392837aec159",
      "name": "API Req2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4060,
        540
      ],
      "executeOnce": false,
      "alwaysOutputData": true,
      "retryOnFail": false,
      "waitBetweenTries": 3000,
      "maxTries": 2,
      "notesInFlow": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "removeLabels",
        "messageId": "={{ $('Remove Duplicates').item.json.id_email }}",
        "labelIds": [
          "INBOX"
        ]
      },
      "id": "23133160-345e-4f47-9a0b-f7aa7f651caa",
      "name": "Remove Inbox",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        5640,
        640
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "markAsRead",
        "messageId": "={{ $('Remove Duplicates').item.json.id_email }}"
      },
      "id": "dce5083d-d5bb-4cf1-85da-d5f37a597979",
      "name": "Mark as Read",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        5860,
        440
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $('Remove Duplicates').item.json.id_email }}",
        "labelIds": [
          "Label_6042366710233736031"
        ]
      },
      "id": "d65c4db4-0990-4b2b-a10f-a3982959c7c3",
      "name": "add Listing_urls",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        5860,
        640
      ],
      "retryOnFail": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "={{ $('Existing_aux').all()[0].json.listing_id }}",
              "field2": "={{ $('Extract URLs').first().json.listing_id }}"
            }
          ]
        },
        "joinMode": "keepNonMatches",
        "outputDataFrom": "input2",
        "options": {
          "fuzzyCompare": true
        }
      },
      "id": "9e1b7f9b-e6e3-48a7-9786-470a93b28a43",
      "name": "Not in DB",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        3820,
        100
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "numberInputs": 5
      },
      "id": "3094da26-69ea-45e4-a2f1-283d8010d196",
      "name": "\"OK\"",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        5060,
        80
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "bda7795f-d9b2-4d6b-9968-8b575f875f77",
              "leftValue": "={{ $json.status }}",
              "rightValue": "={{ \"ok\" }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "b60fa702-cc18-40d7-8893-f0311c2fae1a",
              "leftValue": "={{ $json.status }}",
              "rightValue": "={{ \"removed\" }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "id": "cbda0737-5842-4267-9813-5a47dbe92783",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5220,
        380
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 330378290,
          "mode": "list",
          "cachedResultName": "Listings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=330378290"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_email": "={{ $json.id_email }}",
            "search_alert_email_subject": "={{ $json.subject }}",
            "search_alert_received": "={{ $json.alert_email_received }}",
            "listing_id": "={{ $json.listing_id }}",
            "listing_url": "={{ $json.listing_url }}",
            "seller_email": "={{ $json.data.email }}",
            "cylinders": "={{ $json.data.auto_cylinders }}",
            "drivetrain": "={{ $json.data.auto_drivetrain }}",
            "mileage": "={{ $json.data.auto_miles }}",
            "title": "={{ $json.data.postingTitle }}",
            "transmission": "={{ $json.data.auto_transmission }}",
            "bodytype": "={{ $json.data.auto_bodytype }}",
            "auto_images": "={{ $json.data.imageURLs }}",
            "paint": "={{ $json.data.auto_paint }}",
            "listing_description": "={{ $json.data.postingBody }}",
            "listing_url_extracted_on": "={{ $now.format('yyyy.LL.dd || hh:mm:ss a')}}",
            "fuel_type": "={{ $json.data.auto_fuel_type }}",
            "auto_vin": "={{ $json.data.auto_vin }}",
            "status": "={{ $json.status }}",
            "city": "={{ $json.city }}",
            "year": "={{ $json.data.auto_year }}",
            "make-model": "={{ $json.data.auto_make_model }}",
            "price": "={{ $json.data.auto_price }}",
            "SEND": "={{\"send\"}}"
          },
          "matchingColumns": [
            "listing_id"
          ],
          "schema": [
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "city",
              "displayName": "city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_id",
              "displayName": "listing_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_url",
              "displayName": "listing_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "listing_url_extracted_on",
              "displayName": "listing_url_extracted_on",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "SEND",
              "displayName": "SEND",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "seller_email",
              "displayName": "seller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_phone",
              "displayName": "seller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_name",
              "displayName": "seller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "year",
              "displayName": "year",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "make-model",
              "displayName": "make-model",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_description",
              "displayName": "listing_description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_vin",
              "displayName": "auto_vin",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "price",
              "displayName": "price",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "mileage",
              "displayName": "mileage",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fuel_type",
              "displayName": "fuel_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "cylinders",
              "displayName": "cylinders",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "drivetrain",
              "displayName": "drivetrain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paint",
              "displayName": "paint",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "transmission",
              "displayName": "transmission",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "bodytype",
              "displayName": "bodytype",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_images",
              "displayName": "auto_images",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "id_email",
              "displayName": "id_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_received",
              "displayName": "search_alert_received",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_email_subject",
              "displayName": "search_alert_email_subject",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ]
        },
        "options": {}
      },
      "id": "7aeb691c-15ae-449d-8547-f7a70fd1c639",
      "name": "mark \"send\"",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5860,
        240
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 330378290,
          "mode": "list",
          "cachedResultName": "Listings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=330378290"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_email": "={{ $json.id_email }}",
            "search_alert_email_subject": "={{ $json.subject }}",
            "search_alert_received": "={{ $json.alert_email_received }}",
            "listing_id": "={{ $json.listing_id }}",
            "listing_url": "={{ $json.listing_url }}",
            "seller_email": "={{ $json.data.email }}",
            "cylinders": "={{ $json.data.auto_cylinders }}",
            "drivetrain": "={{ $json.data.auto_drivetrain }}",
            "mileage": "={{ $json.data.auto_miles }}",
            "title": "={{ $json.data.postingTitle }}",
            "transmission": "={{ $json.data.auto_transmission }}",
            "bodytype": "={{ $json.data.auto_bodytype }}",
            "auto_images": "={{ $json.data.imageURLs }}",
            "paint": "={{ $json.data.auto_paint }}",
            "listing_description": "={{ $json.data.postingBody }}",
            "listing_url_extracted_on": "={{ $now.format('yyyy.LL.dd || hh:mm:ss a')}}",
            "fuel_type": "={{ $json.data.auto_fuel_type }}",
            "auto_vin": "={{ $json.data.auto_vin }}",
            "status": "={{ $json.status }}",
            "city": "={{ $json.city }}",
            "year": "={{ $json.data.auto_year }}",
            "make-model": "={{ $json.data.auto_make_model }}",
            "price": "={{ $json.data.auto_price }}",
            "SEND": "={{\"delete\"}}"
          },
          "matchingColumns": [
            "listing_id"
          ],
          "schema": [
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "city",
              "displayName": "city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_id",
              "displayName": "listing_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_url",
              "displayName": "listing_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "listing_url_extracted_on",
              "displayName": "listing_url_extracted_on",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "SEND",
              "displayName": "SEND",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "seller_email",
              "displayName": "seller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_phone",
              "displayName": "seller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_name",
              "displayName": "seller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "year",
              "displayName": "year",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "make-model",
              "displayName": "make-model",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_description",
              "displayName": "listing_description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_vin",
              "displayName": "auto_vin",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "price",
              "displayName": "price",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "mileage",
              "displayName": "mileage",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fuel_type",
              "displayName": "fuel_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "cylinders",
              "displayName": "cylinders",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "drivetrain",
              "displayName": "drivetrain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paint",
              "displayName": "paint",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "transmission",
              "displayName": "transmission",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "bodytype",
              "displayName": "bodytype",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_images",
              "displayName": "auto_images",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "id_email",
              "displayName": "id_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_received",
              "displayName": "search_alert_received",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_email_subject",
              "displayName": "search_alert_email_subject",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ]
        },
        "options": {}
      },
      "id": "13b7f16d-e690-4a69-b61d-b7a784616495",
      "name": "mark \"delete\"",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5860,
        40
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "559f0998-d4a3-45d5-9563-a64f37acb972",
              "leftValue": "={{ $json.status }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "fd9f3765-1443-419e-baf2-49c9d02b160e",
              "leftValue": "={{ $json.city }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "17b98295-8c1b-45d8-888d-93265020ce02",
              "leftValue": "={{ $json.listing_id }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "ad4927f5-6cc2-42df-97dd-0228d7b1a039",
              "leftValue": "={{ $json.listing_url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "52d120b8-7b4b-4b66-8c7f-10f0de604589",
              "leftValue": "={{ $json.listing_url_extracted_on}}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "cf6eafb7-e469-450b-84f9-61fde47846d0",
      "name": "clean up noise",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        5640,
        60
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "{{ $json.city }}",
                    "rightValue": "={{\"boston\"}}",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Boston"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "0bd22e18-4a99-497b-a3a8-2e2da448b5b6",
      "name": "by City",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        5640,
        240
      ]
    },
    {
      "parameters": {
        "inputText": "={{ $('Sergios Gmail').first().json.headers.subject }}{{ $json.headers.from }}",
        "categories": {
          "categories": [
            {
              "category": "=CL_Listings",
              "description": "=Email alerts containing (cars+trucks) in  {{ $('Sergios Gmail').first().json.headers.subject }} or containing \"CL Search Alerts\" <alerts@alerts.craigslist.org> in {{ $json.headers.from }}"
            },
            {
              "category": "=CTA_responses",
              "description": "=Email replies containing @reply.craigslist.org in {{ $json.headers.from }}"
            },
            {
              "category": "CL_login_links ",
              "description": "Emails that contain the phrase \"craigslist login link\" and does not contain \"cars+trucks\" in the {{ $('Sergios Gmail').first().json.headers.subject }}"
            },
            {
              "category": "receipts",
              "description": "=Emails containing invoices or receipts"
            },
            {
              "category": "tools",
              "description": "Email communications from platform tools like Google apps, chatgpt, Sendbird, Textline, n8n, twilio, puppeteer, pinecone, Baserow, Rag, Google Cloud, Azure, AWS, Neo4j or brightdata.com. Also, emails coming from sergio@sellyourcar.ai and any email that was not classified in other group. This is a catch all group."
            },
            {
              "category": "other",
              "description": "All other emails not previously categorized"
            }
          ]
        },
        "options": {
          "systemPromptTemplate": "=Please classify the text provided by the user into one of the following categories: \n- cL_Listings, \n- cL_login_links,\n- sys_alerts,\n- receipts, \n- tools, \n- other \n\nDon't explain, and only output the json.",
          "enableAutoFixing": "={{ true }}"
        }
      },
      "id": "e757b901-4af0-47f0-b2f0-e3c025add58d",
      "name": "Text Classifier",
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "typeVersion": 1,
      "position": [
        2820,
        720
      ],
      "alwaysOutputData": true,
      "executeOnce": false,
      "retryOnFail": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "addLabels",
        "messageId": "={{ $json.id }}",
        "labelIds": [
          "Label_8391725397093456627"
        ]
      },
      "id": "1af16676-2b44-4d56-b532-c286fb9ed9a0",
      "name": "add label: CTA_responses",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        3260,
        720
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c4edc34f-181f-4bbc-ae89-d006c1ae2cb1",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"ok\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "OK"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c08bbc6d-5a43-4c97-9bcc-5bb99a64f322",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"Removed\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Removed"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "993bb3c9-8639-4cbd-862e-f4002398614c",
      "name": "Status Check ",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4520,
        80
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c4edc34f-181f-4bbc-ae89-d006c1ae2cb1",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"ok\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "oK"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c08bbc6d-5a43-4c97-9bcc-5bb99a64f322",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"Removed\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Removed"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "a42a98f8-cb00-4734-a53f-296e3096e16d",
      "name": "Status Check 1",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4520,
        300
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c4edc34f-181f-4bbc-ae89-d006c1ae2cb1",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"ok\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "oK"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c08bbc6d-5a43-4c97-9bcc-5bb99a64f322",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"Removed\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Removed"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "8ee29633-161c-4ccf-adec-d9fa831e71f6",
      "name": "Status Check 2",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4520,
        520
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c4edc34f-181f-4bbc-ae89-d006c1ae2cb1",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"ok\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "oK"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c08bbc6d-5a43-4c97-9bcc-5bb99a64f322",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"Removed\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Removed"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "271bb72f-23f6-41d3-939d-2d246869c3ae",
      "name": "Status Check 3",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4520,
        740
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c4edc34f-181f-4bbc-ae89-d006c1ae2cb1",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"ok\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "oK"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c08bbc6d-5a43-4c97-9bcc-5bb99a64f322",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "={{ \"Removed\" }}",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Removed"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "ignoreCase": true
        }
      },
      "id": "00a3c3c2-f2e5-4d43-bdf3-421605e0a477",
      "name": "Status Check 4",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        4520,
        960
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"id_email\": \"{{ $('Not in DB').item.json.id_email }}\",\n  \"city\": \"{{ $('Not in DB').item.json.city }}\",\n  \"subject\": \"{{ $('Not in DB').item.json.subject }}\",\n  \"alert_email_received\": \"{{ $('Not in DB').item.json.alert_email_received }}\",\n  \"listing_url\": \"{{ $('Not in DB').item.json.listing_url }}\",\n  \"listing_id\": \"{{ $('Not in DB').item.json.listing_id }}\"\n}",
        "includeOtherFields": true,
        "options": {
          "stripBinary": true
        }
      },
      "id": "e5b9acc6-7e48-4d79-ad3e-e06c63da2421",
      "name": "Response1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4300,
        300
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"id_email\": \"{{ $('Not in DB').item.json.id_email }}\",\n  \"city\": \"{{ $('Not in DB').item.json.city }}\",\n  \"subject\": \"{{ $('Not in DB').item.json.subject }}\",\n  \"alert_email_received\": \"{{ $('Not in DB').item.json.alert_email_received }}\",\n  \"listing_url\": \"{{ $('Not in DB').item.json.listing_url }}\",\n  \"listing_id\": \"{{ $('Not in DB').item.json.listing_id }}\"\n}",
        "includeOtherFields": true,
        "options": {
          "stripBinary": true
        }
      },
      "id": "bd08b927-53d2-4ea0-a5e2-a2ed98c10b51",
      "name": "Response2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4300,
        520
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"id_email\": \"{{ $('Not in DB').item.json.id_email }}\",\n  \"city\": \"{{ $('Not in DB').item.json.city }}\",\n  \"subject\": \"{{ $('Not in DB').item.json.subject }}\",\n  \"alert_email_received\": \"{{ $('Not in DB').item.json.alert_email_received }}\",\n  \"listing_url\": \"{{ $('Not in DB').item.json.listing_url }}\",\n  \"listing_id\": \"{{ $('Not in DB').item.json.listing_id }}\"\n}",
        "includeOtherFields": true,
        "options": {
          "stripBinary": true
        }
      },
      "id": "39f0ae4f-48af-4ce0-946e-9e6f44823c62",
      "name": "Response3",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4300,
        740
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"id_email\": \"{{ $('Not in DB').item.json.id_email }}\",\n  \"city\": \"{{ $('Not in DB').item.json.city }}\",\n  \"subject\": \"{{ $('Not in DB').item.json.subject }}\",\n  \"alert_email_received\": \"{{ $('Not in DB').item.json.alert_email_received }}\",\n  \"listing_url\": \"{{ $('Not in DB').item.json.listing_url }}\",\n  \"listing_id\": \"{{ $('Not in DB').item.json.listing_id }}\"\n}",
        "includeOtherFields": true,
        "options": {
          "stripBinary": true
        }
      },
      "id": "a74598bc-83a0-46c5-9acd-9fa2aca8e8a3",
      "name": "Response4",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4300,
        960
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "removeLabels",
        "messageId": "={{ $('Sergios Gmail').item.json.id }}",
        "labelIds": [
          "INBOX"
        ]
      },
      "id": "a708bfb2-82dc-4a1d-9c99-e6aabd829622",
      "name": "Remove \"Inbox\"",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        2820,
        460
      ],
      "credentials": {
        "gmailOAuth2": {
          "id": "Lylt4DtEx7JF3E82",
          "name": "Sergio Mail [Ok]"
        }
      }
    },
    {
      "parameters": {
        "compare": "selectedFields",
        "fieldsToCompare": "={{ $json.id_email }}",
        "options": {}
      },
      "id": "963caa90-7ca9-4bc7-9e69-9148024f6b0d",
      "name": "Remove Duplicates",
      "type": "n8n-nodes-base.removeDuplicates",
      "typeVersion": 1.1,
      "position": [
        5640,
        440
      ],
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10",
          "mode": "list",
          "cachedResultName": "n8n Seller Leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 330378290,
          "mode": "list",
          "cachedResultName": "Listings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1mIesbzTICgrQRr2qB68U--LrsgAvz50ejDJ09-P1a10/edit#gid=330378290"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_email": "={{ $json.id_email }}",
            "search_alert_email_subject": "={{ $json.subject }}",
            "search_alert_received": "={{ $json.alert_email_received }}",
            "listing_id": "={{ $json.listing_id }}",
            "listing_url": "={{ $json.listing_url }}",
            "seller_email": "={{ $json.data.email }}",
            "cylinders": "={{ $json.data.auto_cylinders }}",
            "drivetrain": "={{ $json.data.auto_drivetrain }}",
            "mileage": "={{ $json.data.auto_miles }}",
            "title": "={{ $json.data.postingTitle }}",
            "transmission": "={{ $json.data.auto_transmission }}",
            "bodytype": "={{ $json.data.auto_bodytype }}",
            "auto_images": "={{ $json.data.imageURLs }}",
            "paint": "={{ $json.data.auto_paint }}",
            "listing_description": "={{ $json.data.postingBody }}",
            "listing_url_extracted_on": "={{ $now.format('yyyy.LL.dd || hh:mm:ss a')}}",
            "fuel_type": "={{ $json.data.auto_fuel_type }}",
            "auto_vin": "={{ $json.data.auto_vin }}",
            "status": "={{ $json.status }}",
            "city": "={{ $json.city }}",
            "year": "={{ $json.data.auto_year }}",
            "make-model": "={{ $json.data.auto_make_model }}",
            "price": "={{ $json.data.auto_price }}",
            "SEND": "="
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "city",
              "displayName": "city",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_id",
              "displayName": "listing_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "listing_url",
              "displayName": "listing_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "listing_url_extracted_on",
              "displayName": "listing_url_extracted_on",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "SEND",
              "displayName": "SEND",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "seller_email",
              "displayName": "seller_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_phone",
              "displayName": "seller_phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "seller_name",
              "displayName": "seller_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "year",
              "displayName": "year",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "make-model",
              "displayName": "make-model",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "listing_description",
              "displayName": "listing_description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_vin",
              "displayName": "auto_vin",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "price",
              "displayName": "price",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "mileage",
              "displayName": "mileage",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fuel_type",
              "displayName": "fuel_type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "cylinders",
              "displayName": "cylinders",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "drivetrain",
              "displayName": "drivetrain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paint",
              "displayName": "paint",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "transmission",
              "displayName": "transmission",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "bodytype",
              "displayName": "bodytype",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "auto_images",
              "displayName": "auto_images",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "id_email",
              "displayName": "id_email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_received",
              "displayName": "search_alert_received",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "search_alert_email_subject",
              "displayName": "search_alert_email_subject",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ]
        },
        "options": {}
      },
      "id": "67f9edd6-5561-4720-a3d6-24062e06fdd3",
      "name": "Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        5400,
        240
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "xCok8w0s2phO0cKJ",
          "name": "GSheets S@SYC"
        }
      }
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "QTQERLdzivmwX7p6"
  },
  "staticData": {
    "node:Gmail Trigger": {
      "Gmail Trigger": {
        "lastTimeChecked": 1726721048,
        "possibleDuplicates": [
          "19208984528946ed"
        ]
      }
    },
    "node:Schedule Trigger": {
      "recurrenceRules": [
        6
      ]
    }
  },
  "tags": [
    {
      "createdAt": "2024-08-22T17:13:33.296Z",
      "updatedAt": "2024-08-22T17:13:33.296Z",
      "id": "VG2ofxpeNBDUJ627",
      "name": "SYC"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-12-08T08:41:59.000Z",
  "versionId": "f1d6b22a-77c7-4f4c-a231-c92460486ec4"
}